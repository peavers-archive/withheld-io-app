<div *ngIf="challenge" class="section">
  <div class="container">
    <app-project-header-component [challenge]="challenge"></app-project-header-component>

    <ul class="action-bar">

      <li class="action">
        <a [matMenuTriggerFor]="clone" mat-button>
          <mat-icon>get_app</mat-icon>
          Clone
        </a>
      </li>

      <mat-menu #clone="matMenu">
        <ng-template matMenuContent>
          <button mat-menu-item (click)="copyToClip(challenge.repository.sshUrl)">
            Use SSH
          </button>
          <button mat-menu-item (click)="copyToClip(challenge.repository.htmlUrl)">
            Use HTTPS
          </button>
        </ng-template>
      </mat-menu>

      <li class="action">
        <a href="{{ challenge.repository.htmlUrl }}" mat-button target="_blank">
          <mat-icon>code</mat-icon>
          See on GitHub
        </a>
      </li>

      <li class="action">
        <a href="{{ challenge.lever }}" mat-button target="_blank">
          <mat-icon>link</mat-icon>
          See on Lever
        </a>
      </li>

      <!--      <li class="action">-->
      <!--        <a mat-raised-button color="primary" (click)="feedback()">-->
      <!--          <i class="fa fa-comments"></i>-->
      <!--          Feedback-->
      <!--        </a>-->
      <!--      </li>-->

      <li (click)="deleteChallenge(challenge)" class="action is-pulled-right">
        <button mat-button>
          <mat-icon>delete_forever</mat-icon>
        </button>
      </li>
    </ul>

    <hr>

    <div class="columns is-multiline" *ngIf="codeFileObservable | async as codeFiles">
      <div class="column is-12 contents">
        <ul>
          <li *ngFor="let codeFile of codeFiles">
            <a [href]="'#' + codeFile.id" pageScroll pageScrollDuration="0" pageScrollOffset="70">
              {{ codeFile.location }}
            </a>

            <span *ngIf="countComments(codeFile)" class="icon-count">
              <i class="fa fa-comment-o"></i>{{countComments(codeFile)}}
            </span>
          </li>
        </ul>
      </div>

      <div *ngFor="let codeFile of codeFiles">
        <app-code-file-component [codeFile]="codeFile"></app-code-file-component>
      </div>
    </div>
  </div>
</div>

<app-scroll-to-top></app-scroll-to-top>
